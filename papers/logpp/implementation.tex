% !TeX root = Logpp.tex
Given the design principals outlined in \autoref{sec:implementation} we now 
present the implementation of \projn, which realizes these goals in a logger 
for the \texttt{Node.js}~\cite{Node} runtime. It is possible to implement many 
of the features needed to satisfy our design goals as a library or using the 
native API extension bindings (N-API~\cite{NAPI}) but others require core 
runtime support. For these core changes we modify the ChakraCore JavaScript 
engine and core Node implementation directly.

\subsection{Implementation Overview}
The logging system is split into five major components that (1) manage the 
global logger states, message formats, and activities (2) the in-memory logger 
(3) the stage processor (4) the formatter (5) and finally the emitter. These 
components and the relations between them are shown in~\autoref{fig:xxy} and 
explained in detail in the rest of the section. We will also use a running 
example in~\autoref{fig:runningExample} to illustrate various aspects of the 
system.

TODO: ARCHITECTURE DIAGRAM HERE...

\begin{figure*}[t]
\centering
\begin{subfigure}{0.5\textwidth}
    \lstinputlisting[language=JavaScript,basicstyle=\small]{runningExample.js}
    \caption{App main.}
    \label{fig:appmain}
\end{subfigure}
\begin{subfigure}{0.5\textwidth}
    \lstinputlisting[language=JavaScript,basicstyle=\small]{runningExampleSub.js}
    \caption{App Submodule.}
    \label{fig:appsub}
\end{subfigure}
\caption{Running Example.}
\label{fig:runningExample}
\end{figure*}

The first ...

\subsection{Runtime Independent Implementation}

\subsection{Core Node Implementation}
